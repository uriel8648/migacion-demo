"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var core_injector_1 = __importDefault(require("../../common/core.injector"));
var detect_text_node_1 = __importDefault(require("../crawl/detect-text-node"));
exports.default = (function (result, detector, limit) {
    if (limit === void 0) { limit = 0; }
    return function (node) {
        try {
            var instance = !(0, detect_text_node_1.default)(node) && detector(node) ? (0, core_injector_1.default)(core_1.TemplateRef, node.injector) : undefined;
            if (instance) {
                result.push(instance);
            }
        }
        catch (e) {
            // nothing to do
        }
        return !!limit && result.length === limit;
    };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0ZWN0LXRlbXBsYXRlLXJlZi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvbmctbW9ja3Mvc3JjL2xpYi9tb2NrLWhlbHBlci90ZW1wbGF0ZS1yZWYvZGV0ZWN0LXRlbXBsYXRlLXJlZi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLHNDQUE0QztBQUU1Qyw2RUFBc0Q7QUFFdEQsK0VBQXVEO0FBRXZELG1CQUFlLFVBQ1gsTUFBK0IsRUFDL0IsUUFBNEMsRUFDNUMsS0FBUztJQUFULHNCQUFBLEVBQUEsU0FBUztJQUVYLE9BQUEsVUFBQSxJQUFJO1FBQ0YsSUFBSTtZQUNGLElBQU0sUUFBUSxHQUFHLENBQUMsSUFBQSwwQkFBYyxFQUFDLElBQUksQ0FBQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBQSx1QkFBWSxFQUFDLGtCQUFXLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7WUFDaEgsSUFBSSxRQUFRLEVBQUU7Z0JBQ1osTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN2QjtTQUNGO1FBQUMsT0FBTyxDQUFDLEVBQUU7WUFDVixnQkFBZ0I7U0FDakI7UUFFRCxPQUFPLENBQUMsQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLE1BQU0sS0FBSyxLQUFLLENBQUM7SUFDNUMsQ0FBQztBQVhELENBV0MsRUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCBjb3JlSW5qZWN0b3IgZnJvbSAnLi4vLi4vY29tbW9uL2NvcmUuaW5qZWN0b3InO1xuaW1wb3J0IHsgTW9ja2VkRGVidWdOb2RlIH0gZnJvbSAnLi4vLi4vbW9jay1yZW5kZXIvdHlwZXMnO1xuaW1wb3J0IGRldGVjdFRleHROb2RlIGZyb20gJy4uL2NyYXdsL2RldGVjdC10ZXh0LW5vZGUnO1xuXG5leHBvcnQgZGVmYXVsdCAoXG4gICAgcmVzdWx0OiBBcnJheTxUZW1wbGF0ZVJlZjxhbnk+PixcbiAgICBkZXRlY3RvcjogKG5vZGU6IE1vY2tlZERlYnVnTm9kZSkgPT4gYm9vbGVhbixcbiAgICBsaW1pdCA9IDAsXG4gICk6ICgobm9kZTogTW9ja2VkRGVidWdOb2RlKSA9PiBib29sZWFuKSA9PlxuICBub2RlID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaW5zdGFuY2UgPSAhZGV0ZWN0VGV4dE5vZGUobm9kZSkgJiYgZGV0ZWN0b3Iobm9kZSkgPyBjb3JlSW5qZWN0b3IoVGVtcGxhdGVSZWYsIG5vZGUuaW5qZWN0b3IpIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGluc3RhbmNlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBub3RoaW5nIHRvIGRvXG4gICAgfVxuXG4gICAgcmV0dXJuICEhbGltaXQgJiYgcmVzdWx0Lmxlbmd0aCA9PT0gbGltaXQ7XG4gIH07XG4iXX0=