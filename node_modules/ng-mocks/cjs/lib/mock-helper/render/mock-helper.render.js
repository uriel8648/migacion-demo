"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var func_find_deep_1 = __importDefault(require("./func.find-deep"));
var func_parse_template_1 = __importDefault(require("./func.parse-template"));
exports.default = (function (instance, param, $implicit, variables) {
    var template = (0, func_parse_template_1.default)(param);
    var result = (0, func_find_deep_1.default)(instance, function (tpl) { return tpl.elementRef.nativeElement === template.elementRef.nativeElement; }, function (vcr, tpl) {
        var context = __assign(__assign({}, variables), { $implicit: $implicit });
        vcr.clear();
        vcr.createEmbeddedView(tpl, context).detectChanges();
        return true;
    });
    if (!result) {
        throw new Error('Cannot find path to the TemplateRef');
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9jay1oZWxwZXIucmVuZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9uZy1tb2Nrcy9zcmMvbGliL21vY2staGVscGVyL3JlbmRlci9tb2NrLWhlbHBlci5yZW5kZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLG9FQUE0QztBQUM1Qyw4RUFBc0Q7QUFFdEQsbUJBQWUsVUFBQyxRQUFnQixFQUFFLEtBQWEsRUFBRSxTQUFlLEVBQUUsU0FBa0M7SUFDbEcsSUFBTSxRQUFRLEdBQUcsSUFBQSw2QkFBaUIsRUFBQyxLQUFLLENBQUMsQ0FBQztJQUUxQyxJQUFNLE1BQU0sR0FBRyxJQUFBLHdCQUFZLEVBQ3pCLFFBQVEsRUFDUixVQUFBLEdBQUcsSUFBSSxPQUFBLEdBQUcsQ0FBQyxVQUFVLENBQUMsYUFBYSxLQUFLLFFBQVEsQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFsRSxDQUFrRSxFQUN6RSxVQUFDLEdBQUcsRUFBRSxHQUFHO1FBQ1AsSUFBTSxPQUFPLHlCQUNSLFNBQVMsS0FDWixTQUFTLFdBQUEsR0FDVixDQUFDO1FBQ0YsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ1osR0FBRyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUVyRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUMsQ0FDRixDQUFDO0lBRUYsSUFBSSxDQUFDLE1BQU0sRUFBRTtRQUNYLE1BQU0sSUFBSSxLQUFLLENBQUMscUNBQXFDLENBQUMsQ0FBQztLQUN4RDtBQUNILENBQUMsRUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmdW5jRmluZERlZXAgZnJvbSAnLi9mdW5jLmZpbmQtZGVlcCc7XG5pbXBvcnQgZnVuY1BhcnNlVGVtcGxhdGUgZnJvbSAnLi9mdW5jLnBhcnNlLXRlbXBsYXRlJztcblxuZXhwb3J0IGRlZmF1bHQgKGluc3RhbmNlOiBvYmplY3QsIHBhcmFtOiBvYmplY3QsICRpbXBsaWNpdD86IGFueSwgdmFyaWFibGVzPzogUmVjb3JkPGtleW9mIGFueSwgYW55PikgPT4ge1xuICBjb25zdCB0ZW1wbGF0ZSA9IGZ1bmNQYXJzZVRlbXBsYXRlKHBhcmFtKTtcblxuICBjb25zdCByZXN1bHQgPSBmdW5jRmluZERlZXAoXG4gICAgaW5zdGFuY2UsXG4gICAgdHBsID0+IHRwbC5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQgPT09IHRlbXBsYXRlLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCxcbiAgICAodmNyLCB0cGwpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIC4uLnZhcmlhYmxlcyxcbiAgICAgICAgJGltcGxpY2l0LFxuICAgICAgfTtcbiAgICAgIHZjci5jbGVhcigpO1xuICAgICAgdmNyLmNyZWF0ZUVtYmVkZGVkVmlldyh0cGwsIGNvbnRleHQpLmRldGVjdENoYW5nZXMoKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgKTtcblxuICBpZiAoIXJlc3VsdCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgcGF0aCB0byB0aGUgVGVtcGxhdGVSZWYnKTtcbiAgfVxufTtcbiJdfQ==