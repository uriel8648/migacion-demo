"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var crawl_by_attribute_1 = __importDefault(require("./crawl-by-attribute"));
var crawl_by_attribute_value_1 = __importDefault(require("./crawl-by-attribute-value"));
var crawl_by_declaration_1 = __importDefault(require("./crawl-by-declaration"));
var crawl_by_id_1 = __importDefault(require("./crawl-by-id"));
var crawl_by_tag_name_1 = __importDefault(require("./crawl-by-tag-name"));
var isCrawlByAttribute = function (selector) {
    return Array.isArray(selector) && selector.length === 1 && typeof selector[0] === 'string';
};
var isCrawlByAttributeValue = function (selector) {
    return Array.isArray(selector) && selector.length === 2 && typeof selector[0] === 'string';
};
var isCrawlById = function (selector) {
    return typeof selector === 'string' && selector.indexOf('#') === 0 && selector.length > 1;
};
var isCrawlByTagName = function (selector) {
    return typeof selector === 'string' && selector.indexOf('#') !== 0 && selector.length > 0;
};
var isCrawlByDeclaration = function (selector) {
    return typeof selector === 'function';
};
exports.default = (function (selector) {
    if (isCrawlByAttribute(selector)) {
        return (0, crawl_by_attribute_1.default)(selector[0]);
    }
    if (isCrawlByAttributeValue(selector)) {
        return (0, crawl_by_attribute_value_1.default)(selector[0], selector[1]);
    }
    if (isCrawlById(selector)) {
        return (0, crawl_by_id_1.default)(selector.substr(1));
    }
    if (isCrawlByTagName(selector)) {
        return (0, crawl_by_tag_name_1.default)(selector);
    }
    if (isCrawlByDeclaration(selector)) {
        return (0, crawl_by_declaration_1.default)(selector);
    }
    throw new Error("Unknown selector");
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0ZWN0LWNyYXdsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL25nLW1vY2tzL3NyYy9saWIvbW9jay1oZWxwZXIvY3Jhd2wvZGV0ZWN0LWNyYXdsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFHQSw0RUFBb0Q7QUFDcEQsd0ZBQStEO0FBQy9ELGdGQUF3RDtBQUN4RCw4REFBc0M7QUFDdEMsMEVBQWlEO0FBSWpELElBQU0sa0JBQWtCLEdBQUcsVUFBQyxRQUFrQjtJQUM1QyxPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksUUFBUSxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksT0FBTyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssUUFBUSxDQUFDO0FBQzdGLENBQUMsQ0FBQztBQUVGLElBQU0sdUJBQXVCLEdBQUcsVUFBQyxRQUFrQjtJQUNqRCxPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksUUFBUSxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksT0FBTyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssUUFBUSxDQUFDO0FBQzdGLENBQUMsQ0FBQztBQUVGLElBQU0sV0FBVyxHQUFHLFVBQUMsUUFBa0I7SUFDckMsT0FBTyxPQUFPLFFBQVEsS0FBSyxRQUFRLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDNUYsQ0FBQyxDQUFDO0FBRUYsSUFBTSxnQkFBZ0IsR0FBRyxVQUFDLFFBQWtCO0lBQzFDLE9BQU8sT0FBTyxRQUFRLEtBQUssUUFBUSxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQzVGLENBQUMsQ0FBQztBQUVGLElBQU0sb0JBQW9CLEdBQUcsVUFBQyxRQUFrQjtJQUM5QyxPQUFPLE9BQU8sUUFBUSxLQUFLLFVBQVUsQ0FBQztBQUN4QyxDQUFDLENBQUM7QUFFRixtQkFBZSxVQUFDLFFBQWtCO0lBQ2hDLElBQUksa0JBQWtCLENBQUMsUUFBUSxDQUFDLEVBQUU7UUFDaEMsT0FBTyxJQUFBLDRCQUFnQixFQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3RDO0lBQ0QsSUFBSSx1QkFBdUIsQ0FBQyxRQUFRLENBQUMsRUFBRTtRQUNyQyxPQUFPLElBQUEsa0NBQXFCLEVBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3hEO0lBQ0QsSUFBSSxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUU7UUFDekIsT0FBTyxJQUFBLHFCQUFTLEVBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3RDO0lBQ0QsSUFBSSxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsRUFBRTtRQUM5QixPQUFPLElBQUEsMkJBQWMsRUFBQyxRQUFRLENBQUMsQ0FBQztLQUNqQztJQUNELElBQUksb0JBQW9CLENBQUMsUUFBUSxDQUFDLEVBQUU7UUFDbEMsT0FBTyxJQUFBLDhCQUFrQixFQUFDLFFBQVEsQ0FBQyxDQUFDO0tBQ3JDO0lBRUQsTUFBTSxJQUFJLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBQ3RDLENBQUMsRUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFueVR5cGUgfSBmcm9tICcuLi8uLi9jb21tb24vY29yZS50eXBlcyc7XG5pbXBvcnQgeyBNb2NrZWREZWJ1Z05vZGUgfSBmcm9tICcuLi8uLi9tb2NrLXJlbmRlci90eXBlcyc7XG5cbmltcG9ydCBjcmF3bEJ5QXR0cmlidXRlIGZyb20gJy4vY3Jhd2wtYnktYXR0cmlidXRlJztcbmltcG9ydCBjcmF3bEJ5QXR0cmlidXRlVmFsdWUgZnJvbSAnLi9jcmF3bC1ieS1hdHRyaWJ1dGUtdmFsdWUnO1xuaW1wb3J0IGNyYXdsQnlEZWNsYXJhdGlvbiBmcm9tICcuL2NyYXdsLWJ5LWRlY2xhcmF0aW9uJztcbmltcG9ydCBjcmF3bEJ5SWQgZnJvbSAnLi9jcmF3bC1ieS1pZCc7XG5pbXBvcnQgY3Jhd2xCeVRhZ05hbWUgZnJvbSAnLi9jcmF3bC1ieS10YWctbmFtZSc7XG5cbnR5cGUgU0VMRUNUT1IgPSBzdHJpbmcgfCBBbnlUeXBlPGFueT4gfCBbYW55XSB8IFthbnksIGFueV07XG5cbmNvbnN0IGlzQ3Jhd2xCeUF0dHJpYnV0ZSA9IChzZWxlY3RvcjogU0VMRUNUT1IpOiBzZWxlY3RvciBpcyBbc3RyaW5nXSA9PiB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHNlbGVjdG9yKSAmJiBzZWxlY3Rvci5sZW5ndGggPT09IDEgJiYgdHlwZW9mIHNlbGVjdG9yWzBdID09PSAnc3RyaW5nJztcbn07XG5cbmNvbnN0IGlzQ3Jhd2xCeUF0dHJpYnV0ZVZhbHVlID0gKHNlbGVjdG9yOiBTRUxFQ1RPUik6IHNlbGVjdG9yIGlzIFtzdHJpbmcsIGFueV0gPT4ge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShzZWxlY3RvcikgJiYgc2VsZWN0b3IubGVuZ3RoID09PSAyICYmIHR5cGVvZiBzZWxlY3RvclswXSA9PT0gJ3N0cmluZyc7XG59O1xuXG5jb25zdCBpc0NyYXdsQnlJZCA9IChzZWxlY3RvcjogU0VMRUNUT1IpOiBzZWxlY3RvciBpcyBzdHJpbmcgPT4ge1xuICByZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJyAmJiBzZWxlY3Rvci5pbmRleE9mKCcjJykgPT09IDAgJiYgc2VsZWN0b3IubGVuZ3RoID4gMTtcbn07XG5cbmNvbnN0IGlzQ3Jhd2xCeVRhZ05hbWUgPSAoc2VsZWN0b3I6IFNFTEVDVE9SKTogc2VsZWN0b3IgaXMgc3RyaW5nID0+IHtcbiAgcmV0dXJuIHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycgJiYgc2VsZWN0b3IuaW5kZXhPZignIycpICE9PSAwICYmIHNlbGVjdG9yLmxlbmd0aCA+IDA7XG59O1xuXG5jb25zdCBpc0NyYXdsQnlEZWNsYXJhdGlvbiA9IChzZWxlY3RvcjogU0VMRUNUT1IpOiBzZWxlY3RvciBpcyBBbnlUeXBlPGFueT4gPT4ge1xuICByZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSAnZnVuY3Rpb24nO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgKHNlbGVjdG9yOiBTRUxFQ1RPUik6ICgobm9kZTogTW9ja2VkRGVidWdOb2RlKSA9PiBib29sZWFuKSA9PiB7XG4gIGlmIChpc0NyYXdsQnlBdHRyaWJ1dGUoc2VsZWN0b3IpKSB7XG4gICAgcmV0dXJuIGNyYXdsQnlBdHRyaWJ1dGUoc2VsZWN0b3JbMF0pO1xuICB9XG4gIGlmIChpc0NyYXdsQnlBdHRyaWJ1dGVWYWx1ZShzZWxlY3RvcikpIHtcbiAgICByZXR1cm4gY3Jhd2xCeUF0dHJpYnV0ZVZhbHVlKHNlbGVjdG9yWzBdLCBzZWxlY3RvclsxXSk7XG4gIH1cbiAgaWYgKGlzQ3Jhd2xCeUlkKHNlbGVjdG9yKSkge1xuICAgIHJldHVybiBjcmF3bEJ5SWQoc2VsZWN0b3Iuc3Vic3RyKDEpKTtcbiAgfVxuICBpZiAoaXNDcmF3bEJ5VGFnTmFtZShzZWxlY3RvcikpIHtcbiAgICByZXR1cm4gY3Jhd2xCeVRhZ05hbWUoc2VsZWN0b3IpO1xuICB9XG4gIGlmIChpc0NyYXdsQnlEZWNsYXJhdGlvbihzZWxlY3RvcikpIHtcbiAgICByZXR1cm4gY3Jhd2xCeURlY2xhcmF0aW9uKHNlbGVjdG9yKTtcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBzZWxlY3RvcmApO1xufTtcbiJdfQ==